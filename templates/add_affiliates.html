<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Add Affiliates - Prasadam</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/dashboard_donor.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/global.css') }}">
</head>
<body>
<header>
  <div class="logo">
    <img src="{{ url_for('static', filename='images/logo.png') }}" alt="Logo">
    <h1>Prasadam - Onboard Partners & Drivers</h1>
  </div>
  <div class="profile">
    <a href="{{ url_for('ngo_dashboard') }}" class="btn back-link">Dashboard</a>
    <div class="profile-dropdown">
      <img src="{{ profile_picture or 'https://avatar.iran.liara.run/public/3' }}" alt="Profile Picture" class="profile-pic" onclick="toggleDropdown(event)">
      <div class="dropdown-content" id="profileDropdown">
        {% if session.get('role') == 'donor' %}
          <a href="{{ url_for('profile') }}">Profile</a>
          <a href="{{ url_for('donation_history') }}">Donation History</a>
          <a href="{{ url_for('find_recipients') }}">Find NGOs</a>
          <a href="{{ url_for('manage_affiliations') }}">Manage Affiliations</a>
          <a href="#" onclick="showNotImplemented()">Scheduled Donations</a>
          <hr>
          <a href="{{ url_for('logout') }}">Logout</a>
        {% elif session.get('role') == 'recipient' %}
          <a href="{{ url_for('profile') }}">Profile</a>
          <a href="{{ url_for('manage_affiliations') }}">Manage Affiliations</a>
          <a href="{{ url_for('claim_history') }}">Claim History</a>
          <hr>
          <a href="{{ url_for('logout') }}">Logout</a>
        {% elif session.get('role') == 'driver' %}
          <a href="{{ url_for('profile') }}">Profile</a>
          <a href="{{ url_for('pickup_history') }}">Pickup History</a>
          <hr>
          <a href="{{ url_for('logout') }}">Logout</a>
        {% elif session.get('role') in ['admin', 'super_admin'] %}
          <a href="{{ url_for('profile') }}">Profile</a>
          <a href="{{ url_for('manage_users') }}">Manage Users</a>
          <a href="#" onclick="showNotImplemented()">Reports & Analytics</a>
          <hr>
          <a href="{{ url_for('logout') }}">Logout</a>
        {% else %}
          <a href="{{ url_for('profile') }}">Profile</a>
          <hr>
          <a href="{{ url_for('logout') }}">Logout</a>
        {% endif %}
      </div>
    </div>
  </div>
</header>

<main>
  <section class="hero">
    <h2>Bring your network to Prasadam</h2>
    <p>Add your hotel partners and drivers so you can claim and fulfill listings smoothly.</p>
    {% with messages = get_flashed_messages() %}
      {% if messages %}
        <div class="flash-messages-home flashes">
          {% for message in messages %}
            <div class="alert-success">{{ message }}</div>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}
  </section>

  <div class="dashboard-layout">
    <!-- Left: illustration -->
    <div class="left-column">
      <img src="{{ url_for('static', filename='images/bus.png') }}" alt="Delivery Bus" class="dashboard-image">
    </div>

    <!-- Middle: forms -->
    <div class="middle-column primary-section">
      <div class="requests">
        <h3>Onboard a Partner Hotel/Donor</h3>
        <form method="POST" action="{{ url_for('add_partner') }}" class="donation-form" style="margin-bottom: 24px;">
          <div class="form-group">
            <label class="form-label">Name</label>
            <input type="text" name="name" class="form-input" required>
          </div>
          <div class="form-group">
            <label class="form-label">Email</label>
            <input type="email" name="email" class="form-input" required>
          </div>
          <div class="form-group">
            <label class="form-label">Phone</label>
            <input type="tel" name="phone" class="form-input" pattern="\d{10}" maxlength="10" placeholder="10-digit number" required>
          </div>
          <div class="form-group">
            <label class="form-label">Address</label>
            <textarea name="address" class="form-textarea" rows="3" placeholder="Complete address"></textarea>
          </div>
          <button type="submit" class="btn btn-primary">Add Partner</button>
        </form>

        <h3>Add a Driver</h3>
        <form method="POST" action="{{ url_for('add_driver') }}" class="donation-form">
          <div class="form-group">
            <label class="form-label">Name</label>
            <input type="text" name="name" class="form-input" required>
          </div>
          <div class="form-group">
            <label class="form-label">Email</label>
            <input type="email" name="email" class="form-input" required>
          </div>
          <div class="form-group">
            <label class="form-label">Phone</label>
            <input type="tel" name="phone" class="form-input" pattern="\d{10}" maxlength="10" placeholder="10-digit number" required>
          </div>
          <button type="submit" class="btn btn-secondary">Add Driver</button>
        </form>
      </div>
    </div>

    <!-- Right: images -->
    <div class="right-column">
      <div class="image-stack">
        <img src="{{ url_for('static', filename='images/1.png') }}" alt="Food Item" class="dashboard-image overlay-image">
        <img src="{{ url_for('static', filename='images/basket.png') }}" alt="Food Basket" class="dashboard-image base-image">
      </div>
    </div>
  </div>
</main>

<footer>&copy; 2025 Prasadam. All rights reserved.</footer>

<script>
function showNotImplemented() {
  alert('This feature is not yet implemented.');
}

function toggleDropdown(event) {
  const dropdown = document.getElementById('profileDropdown');
  dropdown.classList.toggle('show');
  event.stopPropagation();
}
window.onclick = function(event) {
  const dropdown = document.getElementById('profileDropdown');
  if (!event.target.matches('.profile-pic')) {
    if (dropdown && dropdown.classList.contains('show')) dropdown.classList.remove('show');
  }
}
</script>
</body>
</html>
